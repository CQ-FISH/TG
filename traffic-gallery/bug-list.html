<!--
=================================================================================
äº¤é€šå›¾åº“ - BUGåˆ—è¡¨é¡µé¢ (bug-list.html)
=================================================================================

ã€æ–‡ä»¶è¯´æ˜ã€‘
æœ¬æ–‡ä»¶æ˜¯äº¤é€šå›¾åº“ç½‘ç«™çš„BUGåˆ—è¡¨é¡µé¢ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

1. BUGç»Ÿè®¡ï¼šå±•ç¤ºä¸åŒçŠ¶æ€çš„BUGæ•°é‡ç»Ÿè®¡
2. BUGç­›é€‰ï¼šæ”¯æŒæŒ‰çŠ¶æ€å’Œåˆ†ç±»ç­›é€‰BUG
3. BUGåˆ—è¡¨ï¼šå±•ç¤ºæ‰€æœ‰ç”¨æˆ·æäº¤çš„BUGï¼ŒåŒ…æ‹¬è¯¦ç»†ä¿¡æ¯
4. BUGè¯¦æƒ…ï¼šæ˜¾ç¤ºBUGæ ‡é¢˜ã€æè¿°ã€æˆªå›¾ã€æäº¤ä¿¡æ¯ç­‰
5. ç®¡ç†å‘˜å›å¤ï¼šå±•ç¤ºç®¡ç†å‘˜å¯¹BUGçš„å›å¤å†…å®¹
6. å›¾ç‰‡é¢„è§ˆï¼šæ”¯æŒBUGæˆªå›¾çš„ç‚¹å‡»é¢„è§ˆ
7. åˆ†é¡µåŠŸèƒ½ï¼šå¯¹å¤§é‡BUGè¿›è¡Œåˆ†é¡µå±•ç¤º

ã€æŠ€æœ¯ç‰¹ç‚¹ã€‘
- åŠ¨æ€æ•°æ®åŠ è½½ï¼šé€šè¿‡JavaScriptä»bug.jsè·å–å’Œæ¸²æŸ“æ•°æ®
- å®æ—¶ç­›é€‰ï¼šæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ¡ä»¶åŠ¨æ€è¿‡æ»¤BUG
- å“åº”å¼è®¾è®¡ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- å›¾ç‰‡é¢„è§ˆï¼šæ¨¡æ€æ¡†å®ç°çš„å›¾ç‰‡é¢„è§ˆåŠŸèƒ½
- æ•°æ®ç»Ÿè®¡ï¼šå®æ—¶è®¡ç®—å’Œå±•ç¤ºBUGçŠ¶æ€ç»Ÿè®¡
- é”™è¯¯å¤„ç†ï¼šå®Œå–„çš„åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤º
--><!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BUGåˆ—è¡¨ - äº¤é€šå›¾åº“</title>
  <meta name="description" content="äº¤é€šå›¾åº“BUGåˆ—è¡¨é¡µé¢ï¼Œå‘æ‰€æœ‰ç”¨æˆ·å±•ç¤ºå·²æäº¤çš„BUGï¼Œå±•ç¤ºBUGè¯¦æƒ…ï¼Œç®¡ç†å‘˜å¯å¯¹å…¶è¿›è¡Œå›å¤ã€‚">
  <!-- å…¨å±€æ ·å¼ -->
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/layout.css">
  <!-- æ ¸å¿ƒJSæ–‡ä»¶ -->
  <script src="js/config.js"></script>
  <script src="js/database.js"></script>
  <script src="js/bug.js"></script>
  <script src="js/bug-sync.js"></script>
  <script src="js/main.js"></script>
  <style>
    /* BUGåˆ—è¡¨é¡µé¢ç‰¹æœ‰æ ·å¼ */
    .bug-list-section {
      padding: 2rem 0;
    }
    
    /* ç»Ÿè®¡å¡ç‰‡ */
    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .stat-card {
      background-color: #fff;
      border-radius: 8px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      transition: transform 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-3px);
    }
    
    .stat-card.pending {
      border-top: 3px solid #6c757d;
    }
    
    .stat-card.processing {
      border-top: 3px solid #ffc107;
    }
    
    .stat-card.resolved {
      border-top: 3px solid #28a745;
    }
    
    .stat-card.total {
      border-top: 3px solid #3498db;
    }
    
    .stat-number {
      font-size: 2rem;
      font-weight: bold;
      color: #333;
    }
    
    .stat-label {
      color: #7f8c8d;
      font-size: 0.9rem;
      margin-top: 0.25rem;
    }
    
    /* ç­›é€‰æ  */
    .filter-bar {
      background-color: #fff;
      border-radius: 8px;
      padding: 1rem 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
    }
    
    .filter-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .filter-label {
      color: #555;
      font-weight: 500;
    }
    
    .filter-select {
      padding: 0.5rem 1rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      background-color: #fff;
      cursor: pointer;
    }
    
    .btn-submit-bug {
      margin-left: auto;
      padding: 0.5rem 1.5rem;
      background-color: #e74c3c;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-decoration: none;
      transition: background-color 0.3s ease;
    }
    
    .btn-submit-bug:hover {
      background-color: #c0392b;
    }
    
    /* BUGåˆ—è¡¨å®¹å™¨ */
    .bug-list-container {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    
    /* BUGé¡¹ */
    .bug-item {
      border-bottom: 1px solid #eee;
      padding: 1.5rem;
      transition: background-color 0.3s ease;
    }
    
    .bug-item:last-child {
      border-bottom: none;
    }
    
    .bug-item:hover {
      background-color: #f8f9fa;
    }
    
    .bug-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 0.75rem;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    .bug-title-wrapper {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex: 1;
    }
    
    .bug-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #333;
      margin: 0;
    }
    
    .bug-id {
      font-size: 0.8rem;
      color: #95a5a6;
      font-family: monospace;
    }
    
    .bug-badges {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    
    .badge {
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .badge-status {
      background-color: #e9ecef;
      color: #495057;
    }
    
    .badge-status.pending {
      background-color: #6c757d;
      color: #fff;
    }
    
    .badge-status.processing {
      background-color: #ffc107;
      color: #212529;
    }
    
    .badge-status.resolved {
      background-color: #28a745;
      color: #fff;
    }
    
    .badge-status.rejected {
      background-color: #dc3545;
      color: #fff;
    }
    
    .badge-category {
      background-color: #e3f2fd;
      color: #1976d2;
    }
    
    .badge-priority {
      background-color: #fff3e0;
      color: #f57c00;
    }
    
    .badge-priority.critical {
      background-color: #ffebee;
      color: #c62828;
    }
    
    .bug-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      font-size: 0.875rem;
      color: #7f8c8d;
      margin-bottom: 0.75rem;
    }
    
    .bug-meta span {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .bug-description {
      color: #555;
      line-height: 1.6;
      margin-bottom: 1rem;
    }
    
    /* æˆªå›¾é¢„è§ˆ */
    .bug-screenshots {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    
    .screenshot-thumb {
      width: 80px;
      height: 80px;
      border-radius: 4px;
      object-fit: cover;
      cursor: pointer;
      border: 1px solid #ddd;
      transition: transform 0.3s ease;
    }
    
    .screenshot-thumb:hover {
      transform: scale(1.05);
    }
    
    /* ç®¡ç†å‘˜å›å¤ */
    .bug-reply {
      background-color: #f0f8ff;
      border-left: 4px solid #3498db;
      padding: 1rem;
      border-radius: 4px;
      margin-top: 1rem;
    }
    
    .bug-reply-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .bug-reply h4 {
      margin: 0;
      color: #3498db;
      font-size: 0.95rem;
    }
    
    .reply-time {
      font-size: 0.8rem;
      color: #95a5a6;
    }
    
    .bug-reply p {
      margin: 0;
      line-height: 1.6;
      color: #555;
    }
    
    /* ç©ºçŠ¶æ€ */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #7f8c8d;
    }
    
    .empty-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }
    
    .empty-title {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      color: #555;
    }
    
    /* åŠ è½½çŠ¶æ€ */
    .loading-state {
      text-align: center;
      padding: 3rem;
      color: #7f8c8d;
    }
    
    .loading-spinner {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* é”™è¯¯çŠ¶æ€ */
    .error-state {
      text-align: center;
      padding: 3rem;
      color: #e74c3c;
    }
    
    .error-state button {
      margin-top: 1rem;
      padding: 0.5rem 1.5rem;
      background-color: #3498db;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    /* åˆ†é¡µ */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      padding: 1.5rem;
      border-top: 1px solid #eee;
    }
    
    .pagination button {
      padding: 0.5rem 1rem;
      border: 1px solid #ddd;
      background-color: #fff;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.3s ease;
    }
    
    .pagination button:hover:not(:disabled) {
      background-color: #f8f9fa;
      border-color: #3498db;
    }
    
    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .pagination .page-info {
      color: #7f8c8d;
      font-size: 0.9rem;
    }
    
    /* å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡† */
    .image-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.9);
      z-index: 10000;
      justify-content: center;
      align-items: center;
    }
    
    .image-modal.active {
      display: flex;
    }
    
    .image-modal img {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
    }
    
    .image-modal .close-btn {
      position: absolute;
      top: 20px;
      right: 40px;
      color: #fff;
      font-size: 40px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="navbar-container">
      <!-- å“ç‰Œæ ‡è¯† -->
      <a href="index.html" class="navbar-brand">
        <span class="navbar-brand-icon">ğŸš—</span>
        <span>äº¤é€šå›¾åº“</span>
      </a>
      
      <!-- ä¸»å¯¼èˆª -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link">åˆ†ç±»</a>
          <div class="dropdown-menu" id="nav-category-dropdown"></div>
        </li>
        <li class="nav-item">
          <a href="gallery.html" class="nav-link">å‘ç°</a>
        </li>
        <li class="nav-item">
          <a href="upload.html" class="nav-link">ä¸Šä¼ </a>
        </li>
        <li class="nav-item" id="login-register-link">
          <a href="login.html" class="nav-link">ç™»å½•/æ³¨å†Œ</a>
        </li>
        <li class="nav-item dropdown user-dropdown" id="user-dropdown" style="display: none;">
          <div class="user-avatar" id="user-avatar">
            <span id="username-display"></span>
          </div>
          <div class="dropdown-menu">
            <a href="profile.html" class="dropdown-item">ä¸ªäººä¿¡æ¯</a>
            <a href="my.html" class="dropdown-item">æˆ‘çš„ä½œå“</a>
            <a href="admin.html" class="dropdown-item">ç®¡ç†åå°</a>
            <a href="review.html" class="dropdown-item">ä½œå“å®¡æ ¸</a>
            <a href="#" class="dropdown-item" onclick="logout()">é€€å‡ºç™»å½•</a>
          </div>
        </li>
      </ul>
      
      <!-- æœç´¢æ¡† -->
      <div class="search-container">
        <input type="text" id="global-search-input" class="search-input" placeholder="æœç´¢ä½œå“ã€æ‘„å½±å¸ˆ...">
        <button type="button" id="global-search-btn" class="search-btn">æœç´¢</button>
      </div>
    </div>
  </nav>

  <!-- å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡† -->
  <div class="image-modal" id="image-modal" onclick="closeImageModal()">
    <span class="close-btn">&times;</span>
    <img src="" alt="é¢„è§ˆ" id="modal-image">
  </div>

  <!-- é¡µé¢å†…å®¹ -->
  <main class="content">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <section class="page-header">
      <div class="container">
        <h1 class="page-title">BUGåˆ—è¡¨</h1>
        <p class="page-subtitle">æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·æäº¤çš„BUGåŠå¤„ç†çŠ¶æ€</p>
      </div>
    </section>

    <!-- BUGåˆ—è¡¨ -->
    <section class="bug-list-section">
      <div class="container">
        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="stats-cards" id="stats-cards">
          <div class="stat-card total">
            <div class="stat-number" id="stat-total">-</div>
            <div class="stat-label">å…¨éƒ¨BUG</div>
          </div>
          <div class="stat-card pending">
            <div class="stat-number" id="stat-pending">-</div>
            <div class="stat-label">å¾…å¤„ç†</div>
          </div>
          <div class="stat-card processing">
            <div class="stat-number" id="stat-processing">-</div>
            <div class="stat-label">å¤„ç†ä¸­</div>
          </div>
          <div class="stat-card resolved">
            <div class="stat-number" id="stat-resolved">-</div>
            <div class="stat-label">å·²è§£å†³</div>
          </div>
        </div>

        <!-- ç­›é€‰æ  -->
        <div class="filter-bar">
          <div class="filter-group">
            <span class="filter-label">çŠ¶æ€ï¼š</span>
            <select class="filter-select" id="filter-status" onchange="loadBugList()">
              <option value="all">å…¨éƒ¨</option>
              <option value="pending">å¾…å¤„ç†</option>
              <option value="processing">å¤„ç†ä¸­</option>
              <option value="resolved">å·²è§£å†³</option>
              <option value="rejected">å·²é©³å›</option>
            </select>
          </div>
          <div class="filter-group">
            <span class="filter-label">åˆ†ç±»ï¼š</span>
            <select class="filter-select" id="filter-category" onchange="loadBugList()">
              <option value="all">å…¨éƒ¨</option>
              <option value="frontend">å‰ç«¯æ˜¾ç¤º</option>
              <option value="function">åŠŸèƒ½å¼‚å¸¸</option>
              <option value="performance">æ€§èƒ½é—®é¢˜</option>
              <option value="security">å®‰å…¨é—®é¢˜</option>
              <option value="ui">ç•Œé¢è®¾è®¡</option>
              <option value="data">æ•°æ®é—®é¢˜</option>
              <option value="other">å…¶ä»–</option>
            </select>
          </div>
          <a href="bug.html" class="btn-submit-bug">+ æäº¤æ–°BUG</a>
        </div>

        <!-- BUGåˆ—è¡¨å®¹å™¨ -->
        <div class="bug-list-container" id="bug-list-container">
          <!-- åŠ è½½çŠ¶æ€ -->
          <div class="loading-state" id="loading-state">
            <div class="loading-spinner"></div>
            <p>æ­£åœ¨åŠ è½½BUGåˆ—è¡¨...</p>
          </div>
        </div>

        <!-- åˆ†é¡µ -->
        <div class="pagination" id="pagination" style="display: none;">
          <button onclick="changePage(-1)" id="prev-btn">ä¸Šä¸€é¡µ</button>
          <span class="page-info" id="page-info">ç¬¬ 1 é¡µ</span>
          <button onclick="changePage(1)" id="next-btn">ä¸‹ä¸€é¡µ</button>
        </div>
      </div>
    </section>
  </main>

  <!-- é¡µè„š -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-row">
        <div class="footer-col">
          <h3>å…³äºæˆ‘ä»¬</h3>
          <ul class="footer-links">
            <li><a href="about.html">å…³äºäº¤é€šå›¾åº“</a></li>
            <li><a href="about.html#rules">ä½¿ç”¨è§„åˆ™</a></li>
            <li><a href="about.html#contact">è”ç³»æˆ‘ä»¬</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>å¿«é€Ÿé“¾æ¥</h3>
          <ul class="footer-links">
            <li><a href="gallery.html">æœ€æ–°ä½œå“</a></li>
            <li><a href="gallery.html?sort=popular">çƒ­é—¨ä½œå“</a></li>
            <li><a href="upload.html">ä¸Šä¼ ä½œå“</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>å¸®åŠ©ä¸­å¿ƒ</h3>
          <ul class="footer-links">
            <li><a href="faq.html">å¸¸è§é—®é¢˜</a></li>
            <li><a href="bug.html">æäº¤BUG</a></li>
            <li><a href="bug-list.html">BUGåˆ—è¡¨</a></li>
          </ul>
        </div>
      </div>
      
      <!-- ç»Ÿè®¡ä¿¡æ¯ -->
      <div class="footer-stats">
        <div class="footer-stats-item">
          <span class="footer-stats-number" id="online-users">0</span>
          <span class="footer-stats-label">åœ¨çº¿äººæ•°</span>
        </div>
        <div class="footer-stats-item">
          <span class="footer-stats-number" id="total-visits">0</span>
          <span class="footer-stats-label">ç´¯è®¡è®¿é—®</span>
        </div>
        <div class="footer-stats-item">
          <span class="footer-stats-number" id="registered-users">0</span>
          <span class="footer-stats-label">æ³¨å†Œç”¨æˆ·</span>
        </div>
        <div class="footer-stats-item">
          <span class="footer-stats-number" id="today-visits">0</span>
          <span class="footer-stats-label">ä»Šæ—¥è®¿é—®</span>
        </div>
      </div>
      
      <!-- ç‰ˆæƒä¿¡æ¯ -->
      <div class="footer-bottom">
        <p>&copy; 2026 äº¤é€šå›¾åº“ - å…¨å“ç±»äº¤é€šæ‘„å½±ä½œå“åˆ†äº«å¹³å° | ç‰ˆæœ¬ v1.0.0</p>
      </div>
    </div>
  </footer>

  <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
  <div class="back-to-top" id="back-to-top">â†‘</div>

  <!-- BUGåˆ—è¡¨è„šæœ¬ -->
  <script>
    // åˆ†é¡µé…ç½®
    const PAGE_SIZE = 10;
    let currentPage = 1;
    let totalPages = 1;
    let currentBugs = [];

    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
      // åŠ è½½BUGåˆ—è¡¨
      loadBugList();
      
      // åŠ è½½ç»Ÿè®¡æ•°æ®
      loadStatistics();
    });
    
    /**
     * åˆ·æ–°BUGåˆ—è¡¨ï¼ˆå…¨å±€å‡½æ•°ï¼Œä¾›bug-sync.jsè°ƒç”¨ï¼‰
     * ã€è¯´æ˜ã€‘å½“åœ¨å…¶ä»–é¡µé¢æäº¤BUGåï¼Œé€šè¿‡æ­¤å‡½æ•°åˆ·æ–°å½“å‰åˆ—è¡¨
     */
    window.refreshBugList = function() {
      console.log('[bug-list.html] åˆ·æ–°BUGåˆ—è¡¨');
      loadBugList();
      loadStatistics();
    };

    // åŠ è½½BUGåˆ—è¡¨
    function loadBugList() {
      const container = document.getElementById('bug-list-container');
      const loadingState = document.getElementById('loading-state');
      const pagination = document.getElementById('pagination');
      
      // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
      container.innerHTML = `
        <div class="loading-state">
          <div class="loading-spinner"></div>
          <p>æ­£åœ¨åŠ è½½BUGåˆ—è¡¨...</p>
        </div>
      `;
      pagination.style.display = 'none';
      
      try {
        // è·å–ç­›é€‰æ¡ä»¶
        const statusFilter = document.getElementById('filter-status').value;
        const categoryFilter = document.getElementById('filter-category').value;
        
        // ä½¿ç”¨åŒæ­¥æ¨¡å—è·å–æ•°æ®ï¼ˆä¼˜å…ˆä»localStorageè·å–æœ€æ–°æ•°æ®ï¼‰
        let bugs = [];
        if (typeof syncGetAllBugs === 'function') {
          bugs = syncGetAllBugs();
        } else {
          bugs = getAllBugs();
        }
        
        // åº”ç”¨ç­›é€‰
        if (statusFilter !== 'all') {
          bugs = bugs.filter(bug => bug.status === statusFilter);
        }
        if (categoryFilter !== 'all') {
          bugs = bugs.filter(bug => bug.category === categoryFilter);
        }
        
        // ä¿å­˜å½“å‰BUGåˆ—è¡¨
        currentBugs = bugs;
        
        // è®¡ç®—åˆ†é¡µ
        totalPages = Math.ceil(bugs.length / PAGE_SIZE) || 1;
        if (currentPage > totalPages) {
          currentPage = totalPages;
        }
        
        // è·å–å½“å‰é¡µæ•°æ®
        const start = (currentPage - 1) * PAGE_SIZE;
        const end = start + PAGE_SIZE;
        const pageBugs = bugs.slice(start, end);
        
        // æ¸²æŸ“BUGåˆ—è¡¨
        if (pageBugs.length === 0) {
          container.innerHTML = `
            <div class="empty-state">
              <div class="empty-icon">ğŸ›</div>
              <div class="empty-title">æš‚æ— BUGè®°å½•</div>
              <p>å½“å‰ç­›é€‰æ¡ä»¶ä¸‹æ²¡æœ‰BUGï¼Œæˆ–è€…è¿˜æ²¡æœ‰äººæäº¤BUG</p>
              <a href="bug.html" style="display: inline-block; margin-top: 1rem; padding: 0.5rem 1.5rem; background-color: #e74c3c; color: #fff; border-radius: 4px; text-decoration: none;">æäº¤æ–°BUG</a>
            </div>
          `;
        } else {
          container.innerHTML = pageBugs.map(bug => renderBugItem(bug)).join('');
          
          // æ˜¾ç¤ºåˆ†é¡µ
          updatePagination();
          pagination.style.display = 'flex';
        }
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        loadStatistics();
        
      } catch (error) {
        console.error('åŠ è½½BUGåˆ—è¡¨å¤±è´¥:', error);
        container.innerHTML = `
          <div class="error-state">
            <div class="empty-icon">âš ï¸</div>
            <div class="empty-title">åŠ è½½å¤±è´¥</div>
            <p>æ— æ³•åŠ è½½BUGåˆ—è¡¨ï¼Œè¯·ç¨åé‡è¯•</p>
            <button onclick="loadBugList()">é‡æ–°åŠ è½½</button>
          </div>
        `;
      }
    }

    // æ¸²æŸ“å•ä¸ªBUGé¡¹
    function renderBugItem(bug) {
      const statusDisplay = getStatusDisplay(bug.status);
      const categoryDisplay = getCategoryDisplay(bug.category);
      const priorityDisplay = getPriorityDisplay(bug.priority);
      const submitTime = formatBugTime(bug.submitTime);
      
      // æˆªå›¾é¢„è§ˆ
      let screenshotsHtml = '';
      if (bug.screenshots && bug.screenshots.length > 0) {
        screenshotsHtml = `
          <div class="bug-screenshots">
            ${bug.screenshots.map((screenshot, index) => `
              <img src="${screenshot.data}" alt="æˆªå›¾${index + 1}" class="screenshot-thumb" onclick="openImageModal('${screenshot.data}')">
            `).join('')}
          </div>
        `;
      }
      
      // ç®¡ç†å‘˜å›å¤
      let replyHtml = '';
      if (bug.replies && bug.replies.length > 0) {
        const lastReply = bug.replies[bug.replies.length - 1];
        replyHtml = `
          <div class="bug-reply">
            <div class="bug-reply-header">
              <h4>ğŸ’¬ ç®¡ç†å‘˜å›å¤</h4>
              <span class="reply-time">${formatBugTime(lastReply.time)}</span>
            </div>
            <p>${escapeHtml(lastReply.content)}</p>
          </div>
        `;
      }
      
      return `
        <div class="bug-item" data-id="${bug.id}">
          <div class="bug-header">
            <div class="bug-title-wrapper">
              <h3 class="bug-title">${escapeHtml(bug.title)}</h3>
              <span class="bug-id">${bug.id}</span>
            </div>
            <div class="bug-badges">
              <span class="badge badge-status ${bug.status}">${statusDisplay.label}</span>
              <span class="badge badge-category">${categoryDisplay.icon} ${categoryDisplay.label}</span>
              <span class="badge badge-priority ${bug.priority}">${priorityDisplay.label}ä¼˜å…ˆçº§</span>
            </div>
          </div>
          <div class="bug-meta">
            <span>ğŸ‘¤ ${escapeHtml(bug.submitter)}</span>
            <span>ğŸ• ${submitTime}</span>
            <span>ğŸ–¥ï¸ ${escapeHtml(bug.browser.substring(0, 50))}${bug.browser.length > 50 ? '...' : ''}</span>
          </div>
          <div class="bug-description">
            ${escapeHtml(bug.description)}
          </div>
          ${screenshotsHtml}
          ${replyHtml}
        </div>
      `;
    }

    // åŠ è½½ç»Ÿè®¡æ•°æ®
    function loadStatistics() {
      try {
        const stats = getBugStatistics();
        document.getElementById('stat-total').textContent = stats.total;
        document.getElementById('stat-pending').textContent = stats.pending;
        document.getElementById('stat-processing').textContent = stats.processing;
        document.getElementById('stat-resolved').textContent = stats.resolved;
      } catch (error) {
        console.error('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
      }
    }

    // æ›´æ–°åˆ†é¡µ
    function updatePagination() {
      document.getElementById('page-info').textContent = `ç¬¬ ${currentPage} é¡µ / å…± ${totalPages} é¡µ`;
      document.getElementById('prev-btn').disabled = currentPage <= 1;
      document.getElementById('next-btn').disabled = currentPage >= totalPages;
    }

    // åˆ‡æ¢é¡µé¢
    function changePage(delta) {
      const newPage = currentPage + delta;
      if (newPage >= 1 && newPage <= totalPages) {
        currentPage = newPage;
        loadBugList();
        // æ»šåŠ¨åˆ°é¡¶éƒ¨
        document.querySelector('.bug-list-section').scrollIntoView({ behavior: 'smooth' });
      }
    }

    // æ‰“å¼€å›¾ç‰‡é¢„è§ˆ
    function openImageModal(src) {
      const modal = document.getElementById('image-modal');
      const img = document.getElementById('modal-image');
      img.src = src;
      modal.classList.add('active');
    }

    // å…³é—­å›¾ç‰‡é¢„è§ˆ
    function closeImageModal() {
      const modal = document.getElementById('image-modal');
      modal.classList.remove('active');
    }

    // HTMLè½¬ä¹‰ï¼Œé˜²æ­¢XSS
    function escapeHtml(text) {
      if (!text) return '';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
  </script>
</body>
</html>
